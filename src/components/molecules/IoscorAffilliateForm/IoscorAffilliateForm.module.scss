$primary: #5b2c6f;
$primary-light: #7a3d94;
$primary-dark: #4a1f5c;
$success: #10b981;
$gray-50: #f9fafb;
$gray-100: #f3f4f6;
$gray-200: #e5e7eb;
$gray-300: #d1d5db;
$gray-400: #9ca3af;
$gray-500: #6b7280;
$gray-700: #374151;
$gray-900: #111827;
$white: #ffffff;

.wrapper { max-width: 1180px; margin: 0 auto; padding: 6px; }

.panel {
  position: relative;
  border: 1px solid $gray-200;
  border-radius: 6px;
  background: $white;
  overflow: visible;
  box-shadow: 0 2px 6px rgba(0,0,0,.04);
}

.panelHead {
  display: flex; align-items: center; gap: 8px;
  background: linear-gradient(180deg, $primary 0%, $primary-dark 100%);
  color: $white; padding: 8px 12px; font-weight: 600;
}
.headIcon { display:grid; place-items:center; width:22px; height:22px; background: rgba(255,255,255,.15); border-radius: 4px; }
.headTitle { font-size: 0.8125rem; }

.formGrid {
  display: grid;
  grid-template-columns: 120px 1fr 120px 1fr;
  column-gap: 10px; row-gap: 6px;
  padding: 10px;
  background: $gray-50;
}

.labelCell { justify-self: end; align-self: center; font-weight: 600; color: $gray-700; font-size: 0.8125rem; }
.fieldCell { display:flex; align-items:center; min-width: 0; }

.input {
  width: 100%; height: 28px;
  border: 1px solid $gray-300; border-radius: 4px;
  padding: 0 8px; background: $white; color: $gray-900; font-size: 0.8125rem;
  transition: border-color .12s ease, box-shadow .12s ease;
  &::placeholder { color: $gray-400; }
  &:hover:not(:disabled) { border-color: $gray-400; }
  &:focus { outline: none; border-color: $primary; box-shadow: 0 0 0 2px rgba(74,123,167,.12); }
  &:disabled { background: $gray-100; color: $gray-500; }
}
.select { padding-right: 32px; appearance: auto; }
.inputSm { width: 70px; }
.inputSelect { width: 120px; }

.orderRow { display: grid; grid-template-columns: 120px 1fr; gap: 8px; width: 100%; }

.combo { position: relative; width: 100%; }
.comboInput { padding-right: 56px; }
.comboSuffix {
  position: absolute; right: 6px; top: 50%; transform: translateY(-50%);
  width: 22px; height: 22px; display: grid; place-items: center;
  border: 1px solid $gray-300; color: $gray-500; background: $gray-100; border-radius: 4px;
}
.comboClear {
  position: absolute; right: 32px; top: 50%; transform: translateY(-50%);
  width: 20px; height: 20px; display: grid; place-items: center;
  border: 1px solid $gray-300; color: $gray-500; background: $white; border-radius: 4px;
}
.suffixOk { border-color: rgba(16,185,129,.3); background: rgba(16,185,129,.1); color: $success; }

.comboList {
  position: absolute; left: 0; right: 0; top: calc(100% + 4px);
  background: $white; border: 1px solid $gray-200; border-radius: 6px;
  box-shadow: 0 8px 16px rgba(0,0,0,.1);
  max-height: 220px; overflow: auto; z-index: 1000; padding: 3px; margin: 0; list-style: none;
}
.comboItem { display: grid; grid-template-columns: 80px 1fr; gap: 6px; padding: 6px 8px; border-radius: 4px; cursor: pointer; font-size: 0.8125rem; &:hover { background: $gray-100; } }
.itemCode { font-weight: 700; color: $primary; font-size: 0.8125rem; }
.itemLabel { color: $gray-700; font-size: 0.8125rem; }

.dateWrap { width: 100%; }
.dateInput { width: 100%; }
.datePopper { z-index: 1100; }

.codeCluster { display: flex; align-items: center; gap: 8px; width: 100%; flex-wrap: wrap; }
.miniInputs { display: inline-flex; align-items: center; gap: 5px; }
.miniLabel { font-weight: 600; color: $gray-700; font-size: 0.8125rem; }

.markGrid { display: inline-flex; align-items: center; gap: 14px; flex-wrap: wrap; }
.checkRow { display: inline-flex; align-items: center; gap: 6px; font-weight: 500; color: $gray-700; font-size: 0.8125rem; }
.checkRow input { width: 15px; height: 15px; accent-color: $primary; }

.percentRow { display: inline-grid; grid-template-columns: 70px 70px 70px; gap: 6px; }

.emptyCell {}

.actions { display: flex; justify-content: center; gap: 8px; padding: 8px 10px; border-top: 1px solid $gray-200; background: $gray-50; }
.btnSave {
  height: 32px; padding: 0 18px; border-radius: 6px; border: none;
  background: $primary; color: $white; font-weight: 700; font-size: 0.8125rem; cursor: pointer;
  transition: transform .12s ease, background .12s ease;
  &:hover:not(:disabled) { transform: translateY(-1px); background: $primary-dark; }
  &:disabled { opacity: .6; cursor: not-allowed; }
}

/* Responsive */
@media (max-width: 1024px) {
  .formGrid { grid-template-columns: 110px 1fr 110px 1fr; }
  .orderRow { grid-template-columns: 110px 1fr; }
}
@media (max-width: 760px) {
  .formGrid { grid-template-columns: 1fr; }
  .labelCell { justify-self: start; margin-top: 4px; }
  .orderRow { grid-template-columns: 1fr; }
  .inputSelect { width: 100%; }
  .codeCluster { flex-direction: column; align-items: stretch; }
  .percentRow { grid-template-columns: 1fr 1fr 1fr; }
}
